<!-- 出口合同管理 -->
<style type="text/css">
	#qingdan_gridBox{display: none;}
	.text-center {text-align: center;}
	.cai_btn {margin-top: 20px;}
	#guanlian_gridBox{display: none;}
	#shenhe_formBoxId {display: none;}
	#shenhe_history {display: none;}
	#shenhe_save_btn{display: none;}
	#zengqingdan_jqGrid_formBox span{color: red;}
</style>
<div class="container-fluid">
	<div class="col-sm-12 plr0 height100 gridBox" id="chukou_gridBox">
		<table id="chukou_jqGrid"></table>
		<div id="chukou_jqGridPager"></div>
	</div>
	
</div>
<!-- 物资清单 -->
<div>
	<div class="col-sm-12 plr0 height100 gridBox" id="qingdan_gridBox" style="padding:0; width:90%;height:80%;">
		<table id="qingdan_jqGrid"></table>
		<div id="qingdan_jqGridPager"></div>
	</div>
</div>
<!-- 关联采购 -->
<div id="guanlian_gridBox">

	<div class="col-xs-5">
	<p style="margin-top: 20px;">请选择要关联的采购合同</p>
		<div id="cai_gridBox">
			<table id="cai_jqGrid"></table>
		</div>

	</div>
	<div class="col-xs-2" style="margin-top: 120px;">	
		<button type="button" class="saveBtn btn btn-info btn-sm" id="cai_save_btn" style="display:block">关联</button>
	</div>
	<div class="col-xs-5">
	<p style="margin-top: 20px;">已关联的采购合同</p>
		<div id="yiguan_gridBox">
			<table id="yiguan_jqGrid"></table>
		</div>
		
	</div>
	<p class="text-center saveOrCacelBtn col-xs-11"> 
		<button type="button" class="btn btn-info btn-sm qx">确定</button>		
		<button type="button" class="btn btn-info btn-sm qx">取消</button>		
	</p>
</div>

<!-- 物资增加 -->
<div id="zengqingdan_jqGrid_formBox" class="layerFormBox">
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>货物编号:
		</label>
		<div class="col-xs-8">
			<input type="text" id="qingdan_haiguan" name="haiguan" class="form-control input-sm"  placeholder="货物编号">
		</div>
	</div>
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>货物名称:
		</label>
		<div class="col-xs-8">
			<input type="text" id="qingdan_name" name="name" class="form-control input-sm"  placeholder="货物名称">
		</div>
	</div>
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>数量:
		</label>
		<div class="col-xs-8">
			<input type="text" id="qingdan_number" name="number" class="form-control input-sm"  placeholder="数量">
		</div>
	</div>
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>规格型号:
		</label>
		<div class="col-xs-8">
			<input type="text" id="qingdan_type" name="type" class="form-control input-sm"  placeholder="规格型号">
		</div>
	</div>
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>计量单位:
		</label>
		<div class="col-xs-8">
			<select id="chukou_bus" name="bus" class="form-control input-sm">
				<option value="个" selected="true">个</option>
				<option value="包" >包</option>
				<option value="台" >台</option>
			</select>
		</div>
	</div>
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>单价:
		</label>
		<div class="col-xs-8">
			<input type="text" id="qingdan_oneprice" name="oneprice" class="form-control input-sm"  placeholder="单价">
		</div>
	</div>
	<div class="form-group col-xs-4">
		<label for="inputEmail3" class="col-xs-4 control-label">
			<span>*</span>总价:
		</label>
		<div class="col-xs-8">
			<input type="text" id="qingdan_allprice" name="allprice" class="form-control input-sm"  placeholder="总价">
		</div>
	</div>
	<p class="text-center col-xs-12">
		<button type="button" class="saveBtn btn btn-info btn-sm" id="qingdan_save_btn">
			保存
		</button>
		<button type="reset" class="saveBtn btn btn-info btn-sm" id="chukou_resetBtn">
			重置
		</button>
		<button type="button" class="saveBtn btn btn-info btn-sm qx" id="chukou_cacle_btn">
			取消
		</button>
	</p>
</div>
<!-- 新增弹窗 -->
<div id="chukou_jqGrid_formBox" class="layerFormBox">
	<div class="form-horizontal layerForm zzxx">
		<div class="row">
			<div class="form-group col-xs-4">
				<label for="inputEmail3" class="col-xs-4 control-label">
					<span>*</span>合同名称:
				</label>
				<div class="col-xs-8">
					<input type="text" id="chukou_relName" name="relName" class="form-control input-sm"  placeholder="合同名称">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>合同编号:
				</label>
				<div class="col-xs-8">
					<input type="text" id="chukou_numBer" name="numBer" class="form-control input-sm"  placeholder="合同编号">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>业务类型:
				</label>
				<div class="col-xs-8">
					<select id="chukou_bus" name="bus" class="form-control input-sm">
						<option value="外综服务" selected="true">外综服务</option>
						<option value="一般贸易" >一般贸易</option>
						<option value="承包商" >承包商</option>
					</select>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>签约日期:
				</label>
				<div class="col-xs-8">
					<input type="text" id="chukou_creatTime" onclick="WdatePicker();" name="createTime"  class="form-control input-sm"  placeholder="签订日期">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>生效日期:
				</label>
				<div class="col-xs-8">
					<input type="text" onclick="WdatePicker();" class="form-control input-sm"  placeholder="生效日期">
				</div>
			</div>
			<!-- <div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					截止日期:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="发运地点">
				</div>
			</div> -->
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>币制:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">人民币</option>
						<option value="" >美元</option>
						<option value="" >欧元</option>
					</select>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>合同金额:
				</label>
				<div class="col-xs-8">
					<input type="text" id="chukou_hetongmoney" name="hetongmoney" class="form-control input-sm"  placeholder="合同金额">
				</div>
			</div>
			
<!-- 			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>成交金额:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="成交金额">
				</div>
			</div> -->
			<!-- <div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					合同类型:
				</label>
			</div> -->
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>结汇方式:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">汇付</option>
						<option value="" >托收</option>
						<option value="" >信用证</option>
					</select>
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>成交方式:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">FOB</option>
						<option value="" >CIF</option>
						<option value="" >CFR</option>
					</select>
				</div>
			</div>
		</div>
		<div class="row">
			<!-- <div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					指运港:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="指运港">
				</div>
			</div> -->
			
			
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>运输方式:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">海洋运输</option>
						<option value="" >空中运输</option>
						<option value="" >陆地运输</option>
					</select>
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>出口国别:
				</label>
				<div class="col-xs-8">
					<select id="chukou_county" name="county" class="form-control input-sm">
						<option value="泰国" selected="true">泰国</option>
						<option value="美国" >美国</option>
						<option value="英国" >英国</option>
						<option value="德国" >德国</option>
						<option value="日本" >日本</option>
					</select>
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>出口口岸:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="出口口岸">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>运抵国:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">泰国</option>
						<option value="" >美国</option>
						<option value="" >英国</option>
						<option value="" >德国</option>
						<option value="" >日本</option>
					</select>
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					<span>*</span>指运港:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">泰国港</option>
						<option value="" >美国港</option>
						<option value="" >英国港</option>
						<option value="" >德国港</option>
						<option value="" >日本港</option>
					</select>
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					批准文号:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="批准文号">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					经营单位:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="经营单位">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					许可证:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="许可证">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					装运期:
				</label>
				<div class="col-xs-8">
					<input type="text" onclick="WdatePicker();" class="form-control input-sm"  placeholder="装运期">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					发货单位代码:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="发货单位代码">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					发货单位:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="发货单位">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					件数:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="件数">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					工期起始时间:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="工期起始时间">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					工期结束时间:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="工期结束时间">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					工期（天）:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="工期（天）">
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					不退税标志:
				</label>
				<div class="col-xs-8">
					<input type="radio" class="input-sm">
				</div>
			</div>
			<!-- <div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					结算状态:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">已结算</option>
						<option value="" >未结算</option>
					</select>
				</div>
			</div> -->
			<!-- 
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					出口口岸:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="出口口岸">
				</div>
			</div> -->
		</div>
		<!-- 
			
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					备案:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="备案">
				</div>
			</div>
		</div>
		<div class="row">
			
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					成交方式:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">FOB</option>
						<option value="" >CIF</option>
						<option value="" >CFR</option>
					</select>
				</div>
			</div>
			
		</div>
		<div class="row">
			
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					装运港:
				</label>
				<div class="col-xs-8">
					<select id="" class="form-control input-sm">
						<option value="" selected="true">天津港</option>
						<option value="" >新港港口</option>
					</select>
				</div>
			</div>
			<div class="form-group col-xs-4">
				<label class="col-xs-4 control-label">
					许可证:
				</label>
				<div class="col-xs-8">
					<input type="text" class="form-control input-sm"  placeholder="许可证">
				</div>
			</div>
		</div>
		<div class="row">
			
		</div> -->
		<form action="" class="col-xs-12 zzxx" style="margin-bottom: 50px;">
			<div class="row col-xs-6 ctrol_form" style="border: 1px solid #000;border-right: none;margin-left: 20px;">
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						<span>*</span>买方名称:
					</label>
					<div class="col-xs-8">
						<input type="text" id="chukou_company" name="company" class="form-control input-sm"  placeholder="买方名称">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						买方签约人:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="买方签约人">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						买方联系电话:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="买方联系电话">
					</div>
				</div>
<!-- 				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						开户行:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="开户行">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						银行:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="银行">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						传真:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="传真">
					</div>
				</div> -->
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						买方地址:
					</label>
					<div class="col-xs-8">
						<textarea type="text" class="form-control input-sm"  placeholder="买方地址"></textarea>
					</div>
				</div>
			</div>
			<div class="row col-xs-6 ctrol_form" style="border: 1px solid #000;">
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						<span>*</span>卖方名称:
					</label>
					<div class="col-xs-8">
						<input type="text" id="chukou_anothorCompany" name="anothorCompany" class="form-control input-sm"  placeholder="卖方名称">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						卖方签约人:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="卖方签约人">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						卖方联系电话:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="卖方联系电话">
					</div>
				</div>
				<!-- <div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						开户行:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="开户行">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						银行:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="银行">
					</div>
				</div>
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						传真:
					</label>
					<div class="col-xs-8">
						<input type="text" class="form-control input-sm"  placeholder="传真">
					</div>
				</div> -->
				<div class="form-group col-xs-12">
					<label class="col-xs-4 control-label">
						卖方地址:
					</label>
					<div class="col-xs-8">
						<textarea type="text" class="form-control input-sm"  placeholder="卖方地址"></textarea>
					</div>
				</div>
			</div>
		</form>
		<div class="row col-xs-12 ctform">
			<label class="col-xs-2 control-label text-right">
				备注:
			</label>
			<div class="col-xs-10">
				<textarea type="text" class="form-control input-sm"  placeholder="备注"></textarea>
			</div>
		</div>
		<form class="form-horizontal zzxx" id="chukou_fileupload" method="POST" enctype="multipart/form-data">
			<div class="row col-xs-12 ctform">
				<!-- <label class="col-xs-3 control-label">
					合同源文件:
				</label>
				<div class="col-xs-3">
					<input type="file" class="input-sm"  placeholder="选择文件">
				</div> -->
				<label class="col-sm-2 control-label text-right"><span>*</span>合同源文件:</label>
				<div class="col-sm-8">
					<span class="btn btn-default btn-sm fileinput-button">
						<i class="glyphicon glyphicon-plus"></i>
						<span>添加附件</span>
						<input type="file" name="files[]" multiple>
					</span>
				</div>
			</div>
			<div class="row col-xs-12 ctform">
				<!-- <label class="col-xs-3 control-label">
					合同源文件:
				</label>
				<div class="col-xs-3">
					<input type="file" class="input-sm"  placeholder="选择文件">
				</div> -->
				<label class="col-sm-2 control-label text-right"><span>*</span>投标文件:</label>
				<div class="col-sm-8">
					<span class="btn btn-default btn-sm fileinput-button">
						<i class="glyphicon glyphicon-plus"></i>
						<span>添加附件</span>
						<input type="file" name="files[]" multiple>
					</span>
				</div>
			</div>
			<div class="row col-xs-12 ctform">
				<!-- <label class="col-xs-3 control-label">
					合同源文件:
				</label>
				<div class="col-xs-3">
					<input type="file" class="input-sm"  placeholder="选择文件">
				</div> -->
				<label class="col-sm-2 control-label text-right"><span>*</span>中标文件:</label>
				<div class="col-sm-8">
					<span class="btn btn-default btn-sm fileinput-button">
						<i class="glyphicon glyphicon-plus"></i>
						<span>添加附件</span>
						<input type="file" name="files[]" multiple>
					</span>
				</div>
			</div>
			<div class="row col-xs-12 ctform">
				<!-- <label class="col-xs-3 control-label">
					合同源文件:
				</label>
				<div class="col-xs-3">
					<input type="file" class="input-sm"  placeholder="选择文件">
				</div> -->
				<label class="col-sm-2 control-label text-right"><span>*</span>其他:</label>
				<div class="col-sm-8">
					<span class="btn btn-default btn-sm fileinput-button">
						<i class="glyphicon glyphicon-plus"></i>
						<span>添加附件</span>
						<input type="file" name="files[]" multiple>
					</span>
				</div>
			</div>
			<div class="col-xs-6">

			</div>
			<!-- 用于显示上传文件的浏览 样式files是必须的-->
			<ul style="text-align:center;margin:10px auto;padding:0;" class="thumbnails list-unstyled clearfix files"></ul>
		</form>
		<p class="text-center col-xs-12" id="ctrl">
			<button type="button" class="saveBtn btn btn-info btn-sm" id="shenhe_save_btn">
				审核
			</button>
			<button type="button" class="saveBtn btn btn-info btn-sm" id="chukou_save_btn">
				保存
			</button>
			<button type="reset" class="saveBtn btn btn-info btn-sm" id="chukou_resetBtn">
				重置
			</button>
			<button type="button" class="saveBtn btn btn-info btn-sm qx" id="chukou_cacle_btn">
				取消
			</button>
		</p>
	</div>
	
</div>

<!-- 报表统计 -->
<div class="container-fluid layerFormBox" id="chukou_bbtj">
	<div class="row tjDate"> 
		<div class="form-group text-center col-sm-4">
			<div class="col-sm-5 plr0">
				<input type="riqi" class="form-control input-sm"
					id="inputEmail3" onClick="WdatePicker()" placeholder="开始日期 ">
			</div>
			<div class="col-sm-1 plr0 text-center">
				<i style="position:relative; top:6px;color:#bbb;font-style:normal;">至</i>
			</div>
			<div class="col-sm-5 plr0">
				<input type="riqi" class="form-control input-sm"
					id="inputEmail4" onClick="WdatePicker()" placeholder="结束日期 ">
			</div>
		</div>
		<div class="col-sm-2"> 
			<button class="btn btn-info btn-sm">查询</button>
		</div>
	</div>
	<div class="row"> 
		<div class="col-sm-12"> 
			<table id="tj" class="table table-striped table-condensed table-bordered">
				<thead>
					<tr class="d9">
						<th>时间(年/月)</th>
						<th>合同名称</th>
						<th>业务类型</th>
						<th>出口口岸</th>
						<th>签订日期</th>
						<th>成交方式</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td rowspan="2">2015-05-02</td>
						<td>仓储保管合同</td>
						<td>一般贸易</td>
						<td>新港</td>
						<td>2015-01-02</td>
						<td>FOB</td>
					</tr>
					<tr>
						<td>钢铁出口合同</td>
						<td>外综服务</td>
						<td>天津港</td>
						<td>2015-03-02</td>
						<td>FOB</td>
					</tr>
					<tr>
						<td rowspan="2">2017-8-15</td>
						<td>仓储保管合同</td>
						<td>一般贸易</td>
						<td>新港</td>
						<td>2017-01-02</td>
						<td>FOB</td>
					</tr>
					<tr>
						<td>钢铁出口合同</td>
						<td>外综服务</td>
						<td>天津港</td>
						<td>2015-03-02</td>
						<td>FOB</td>
					</tr>
					<tr>
						<td>合计</td>
						<td colspan="5" class="textRight">总记录 : 4</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="row">
		<div class="col-sm-6"> 
			<div id="chukou_lineChart" style="min-width:400px;height:400px"></div>
		</div>
		<div class="col-sm-6"> 
			<div id="chukou_circleChart" style="min-width:400px;height:400px"></div>
		</div>
	</div>
</div>

<!-- 导入合同 -->
<div class="layerFormBox import_formBox" id="chukou_import_formBox"> 
	<form action="" id="chukou_import_form" method="POST" enctype="multipart/form-data">
		<div class="form-group col-sm-12">
			<label class="col-sm-2 control-label text-right"><span class="necessary">*</span>选择要导入合同:</label>
			<div class="col-sm-2">
				<span class="btn btn-default btn-sm fileinput-button">
					<i class="glyphicon glyphicon-plus"></i>
					<span>导入合同</span>
					<input type="file" name="files[]" multiple>
				</span>
			</div>
		</div>
		<div class="form-group col-sm-12">
			支持excle、CSV、xml 三种方式导入
		</div>
		<ul style="text-align:center;margin:10px auto;padding:0;"  class="thumbnails list-unstyled clearfix files"></ul>
	</form>
	<p class="text-center saveOrCacelBtn"> 
		<button type="button" class="btn btn-info btn-sm qx">确定</button>		
		<button type="button" class="btn btn-info btn-sm qx">取消</button>		
	</p>
</div>
<!--  -->
<div class="layerFormBox" id="shenhe_formBoxId"> 
	<div class="row"><div class="col-sm-12" style="padding-top:15px;"><div class="radio-inline"><label><input type="radio" name="a" checked="true"/>审核不通过</label></div><div class="radio-inline"><label><input type="radio" name="a"/>审核通过</label></div><textarea class="form-control" rows="3" placeholder="审核意见..."></textarea><p class="text-center" style="margin-top:15px;"><button class="btn btn-info btn-sm qx">保存</button></p></div></div>
	<div class="col-sm-12" id="shenhe_history"> 
			<table id="tj" class="table table-striped table-condensed table-bordered">
				<thead>
					<tr class="d9">
						<th>审核人</th>
						<th>审核日期</th>
						<th>审核状态</th>
						<th>说明</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>admin</td>
						<td>2015-01-10</td>
						<td>已通过</td>
						<td></td>
					</tr>
					<tr>
						<td>admin</td>
						<td>2015-01-06</td>
						<td>未通过</td>
						<td></td>
					</tr>
					<tr>
						<td>admin</td>
						<td>2015-01-04</td>
						<td>未通过</td>
						<td></td>
					</tr>
					<tr>
						<td>admin</td>
						<td>2015-01-02</td>
						<td>未通过</td>
						<td></td>
					</tr>
					<tr>
						<td>合计</td>
						<td colspan="5" class="textRight">总记录 : 4</td>
					</tr>
				</tbody>
			</table>
		</div>
</div>
<div id="qingdan_jqGrid_formBox" class="layerFormBox">
	<div class="form-horizontal layerForm zzxx">
		<div class="form-group col-xs-4">
			<label for="inputEmail3" class="col-xs-4 control-label">
				<span>*</span>货物名称:
			</label>
			<div class="col-xs-8">
				<input type="text" id="chukou_relName" name="relName" class="form-control input-sm"  placeholder="货物名称">
			</div>
		</div>
		<div class="form-group col-xs-4">
			<label class="col-xs-4 control-label">
				<span>*</span>数量:
			</label>
			<div class="col-xs-8">
				<input type="text" id="chukou_numBer" name="numBer" class="form-control input-sm"  placeholder="数量">
			</div>
		</div>
		<div class="form-group col-xs-4">
			<label class="col-xs-4 control-label">
				<span>*</span>单价:
			</label>
			<div class="col-xs-8">
				<input type="text" id="chukou_numBer" name="numBer" class="form-control input-sm"  placeholder="单价">
			</div>
		</div>
		<div class="form-group col-xs-4">
			<label class="col-xs-4 control-label">
				规格型号:
			</label>
			<div class="col-xs-8">
				<input type="text" id="chukou_numBer" name="numBer" class="form-control input-sm"  placeholder="规格型号">
			</div>
		</div>
		<div class="form-group col-xs-4">
			<label class="col-xs-4 control-label">
				供货商:
			</label>
			<div class="col-xs-8">
				<select id="chukou_bus" name="bus" class="form-control input-sm">
					<option value="深圳五金供货" selected="true">深圳五金供货</option>
					<option value="上海五金供货" >上海五金供货</option>
					<option value="河南五金供货" >河南五金供货</option>
				</select>
			</div>
		</div>
		<div class="form-group col-xs-4">
			<label class="col-xs-4 control-label">
				金额:
			</label>
			<div class="col-xs-8">
				<input type="text" id="chukou_numBer" name="numBer" class="form-control input-sm"  placeholder="金额">
			</div>
		</div>
		<div class="form-group col-xs-4">
			<label class="col-xs-4 control-label">
				单位:
			</label>
			<div class="col-xs-8">
				<select id="chukou_bus" name="bus" class="form-control input-sm">
					<option value="汇付" selected="true">汇付</option>
					<option value="托收" >托收</option>
					<option value="信用证" >信用证</option>
				</select>
			</div>
		</div>
		<p class="text-center saveOrCacelBtn"> 
			<button type="button" class="btn btn-info btn-sm qx">确定</button>		
			<button type="button" class="btn btn-info btn-sm qx">取消</button>		
		</p>
	</div>
</div>
<script type="text/javascript">

	
$(function(){
	//-------------------------------//
	var layerIndex = null; //弹窗id,关闭所用
	var flag = ''; //添加修改标记
	var dataUrl = 'data/chukou.json';//数据源链接
	var qingdanUrl = 'data/qingdan.json';
	var qingdanUrl = 'data/caigou.json';
	var gridId = 'chukou_jqGrid'; //表格id
	var qingdan_gridId = 'qingdan_jqGrid'; //表格id
	var gird = 'cai_jqGrid'

	var gridPager = 'chukou_jqGridPager'; //表格分页id
	var formBoxId = 'chukou_jqGrid_formBox'; //添加修改窗口元素id
	var layerCloseClassName = 'qx';
	var ctrl = 'ctrl'; //保存 重置 删除按钮
	var dataSaveBtn = 'chukou_save_btn'; //弹窗保存id
	var qingdan_SaveBtn = 'qingdan_save_btn'; //弹窗保存id
	var gridBoxId = 'chukou_gridBox';//表格尺寸
	var shenhe_formBoxId = 'shenhe_formBoxId'; //审核弹框

	var qingdan_formBoxId = 'qingdan_formBoxId'; //物资清单弹框
	var layerCloseTime = 1200; //1200毫秒提示消息关闭延迟时间
	var gridWidth = $('#'+gridBoxId).width()-2;
	// var gridHeight = $('#'+gridBoxId).height()-118;
	var gridHeight = $('#'+gridBoxId).height()-132;

	var qingdan_gridWidth = $('#qingdan_gridBox').width();
	var qingdan_gridHeight = $('#qingdan_gridBox').height()-132;

	var cai_gridWidth = 370;
	var cai_gridHeight = 170;

	var colModel = [
			{label : '合同编号', name : 'numBer', align: 'center', width: 100, searchoptions: { sopt : ['cn']}
},
			{label : '合同名称', name : 'relName', align: 'center', width:90, formatter: formatrelName, searchoptions: { sopt : ['cn']}},
			{label : '签订日期 ', name : 'createTime', align: 'center', width:60, searchoptions: { sopt : ['cn']}
},
			{label : '买方', name : 'company', align: 'center', width:80, searchoptions: { sopt : ['cn']}},
			{label : '卖方', name : 'anothorCompany', align: 'center',width:90, searchoptions: { sopt : ['cn']}},
			{label : '出口国别', name : 'county', align: 'center',width:40, searchoptions: { sopt : ['cn']}
},
			{label : '贸易方式', name : 'bus', align: 'center', width:50, searchoptions: { sopt : ['cn']}
},
			{label : '货物清单', name : 'list', align: 'center',width:40, searchoptions: { sopt : ['cn']}},
			{label : '审核状态', name : 'status', align: 'center',width:40,formatter:formatStatus, searchoptions: { sopt : ['cn']}},
			{label : '关联状态', name : 'related', align: 'center',width:40, searchoptions: { sopt : ['cn']},formatter:formatRelated}

	];
	/*
		numBer :
		relName:
		createTime:
		bus:
		company:
		anothorCompany:
		status:
	*/
	
	$('#'+gridId).jqGrid({
		width: gridWidth,
		height: gridHeight,
		url: dataUrl,
		datatype: "json",
		loadonce: true, //加载到本地操作
		rownumbers: true, //显示顺序编号
		multiselect: true, //定义多选
		viewrecords: true, //显示总记录数
		sortname: 'name', //排序字段
		sortorder: 'asc', //排序顺序，升序或者降序（asc or desc）
		altRows : true, //设置表格隔行变色
		rowNum: 15, //每页显示的记录数
		rowList:[10,12,15,18,20,25], //
		rownumWidth: 30, 
		recordtext: "当前显示: <b>{0}</b>至<b>{1}</b> 总数: <b>{2}</b>",
		//emptyrecords: "No records to view",
		//loadtext: "Loading...",
		pager: '#'+gridPager,
		colModel: colModel
		//jsonReader : jsonReader
		
	}).navGrid('#'+gridPager,{ // the buttons to appear on the toolbar of the grid
		edit:false,add:false,del:false,search:false,refresh:false
	// }).navButtonAdd('#'+gridPager,{
	// 	//caption: '刷新',
	// 	caption: '',
	// 	title : '刷新',
	// 	buttonicon : 'glyphicon-refresh',
	// 	onClickButton : function(){refresh();}, //调用添加的函数
	// 	position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
		caption: '',
		title : '新增',
		buttonicon : 'glyphicon-plus',
		onClickButton : function(){addLayer();}, //调用添加的函数
		position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
		//caption: '新增',
		caption: '',
		title : '修改',
		buttonicon : 'glyphicon glyphicon-edit',
		onClickButton : function(){updateLayer();}, //调用添加的函数
		position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
		//caption: '审核',
		caption: '',
		title : '审核',
		buttonicon : 'fa fa-gavel',
		onClickButton : function(){shenhe();}, //调用审核的函数
		position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
		//caption: '导入合同',
		caption: '',
		title : '导入合同',
		buttonicon : 'fa fa-upload',
		onClickButton : function(){importLayer();}, //调用导入合同函数
		position : 'last'
			
	// }).navButtonAdd('#'+gridPager,{
	// 	//caption: '统计',
	// 	caption: '',
	// 	title : '报表统计',
	// 	buttonicon : 'fa fa-bar-chart-o',
	// 	onClickButton : function(){chukoutongji();}, //调用报表统计的函数
	// 	position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
		//caption: '删除',
		caption: '',
		title : '删除',
		buttonicon : 'glyphicon-trash',
		//onClickButton : deleteLayer(gridId), //调用删除的函数
		onClickButton : function(){ deleteLayer(gridId); },
		position : 'last'
		
	}).navSeparatorAdd('#'+gridPager,{
		sepcontent: '',
		sepclass : "ui-separator"
	});
	
	//表格添加搜索框按钮
	$('#'+gridId).jqGrid('filterToolbar');
	//修改工具条
	changeSearch(); 
	

	
	//弹框保存按钮
	$(document).on('click','#'+dataSaveBtn,function(){
		if(flag == 'add'){
			var data = getFormData(formBoxId);
			var currentNumber = uuid.v4();
			var result = jQuery('#'+gridId).addRowData(currentNumber,data,'first');
			if(result){
				layer.msg('添加成功',{time:layerCloseTime});
				layer.close(layerIndex);
				
				jQuery('#'+gridId).setSelection(currentNumber,true);
				
			}else{
				layer.msg('添加失败!',{time:layerCloseTime});
			}
		}else if(flag == 'update'){
			
			//删除
			var rowIds = getSelectedRow(gridId);
			jQuery('#'+gridId).delRowData(rowIds[0]);
			//添加
			var data = getFormData(formBoxId);
			console.log(data);
			var currentNumber = uuid.v4();
			var result = jQuery('#'+gridId).addRowData(currentNumber,data,'first');
			
			if(result){
				layer.msg('更新成功',{time:layerCloseTime});
				layer.close(layerIndex);
				jQuery('#'+gridId).setSelection(currentNumber,true);
			}else{
				layer.msg('更新失败!',{time:layerCloseTime});
			}
		}
		
	});
	$(document).on('click','#'+qingdan_SaveBtn,function(){
		if(flag == 'add'){
			var data = getFormData(formBoxId);
			var currentNumber = uuid.v4();
			var result = jQuery('#'+qingdan_gridId).addRowData(currentNumber,data,'first');
			if(result){
				layer.msg('添加成功',{time:layerCloseTime});
				layer.close(layerIndex);
				
				jQuery('#'+qingdan_gridId).setSelection(currentNumber,true);
				
			}else{
				layer.msg('添加失败!',{time:layerCloseTime});
			}
		}else if(flag == 'update'){
			
			//删除
			var rowIds = getSelectedRow(gridId);
			jQuery('#'+qingdan_gridId).delRowData(rowIds[0]);
			//添加
			var data = getFormData(formBoxId);
			console.log(data);
			var currentNumber = uuid.v4();
			var result = jQuery('#'+qingdan_gridId).addRowData(currentNumber,data,'first');
			
			if(result){
				layer.msg('更新成功',{time:layerCloseTime});
				layer.close(layerIndex);
				jQuery('#'+qingdan_gridId).setSelection(currentNumber,true);
			}else{
				layer.msg('更新失败!',{time:layerCloseTime});
			}
		}
		
	});
	//关联按钮
	$(document).on('click','#cai_save_btn',function(){
		var rowIds = getSelectedRow(gird);
		if(rowIds && $.isArray(rowIds) && rowIds.length >= 1 ){
			showcai();
		}else{
			layer.msg('请选择一条记录!',{time:layerCloseTime});
		}
	});
	//弹框取消按钮
	$('.'+layerCloseClassName).on('click',function(){
		layer.close(layerIndex);
	});

	//清单弹出框
	var flag = false;
		$(document).on('click','.chukou_wzqd',function(){
			
			commIndex = layer.open({
				type: 1,
				title : '物资清单',
				area: ['80%', '80%'], //宽高
				content: $('#qingdan_gridBox')
			});
			
			$("#qingdan_jqGrid").jqGrid({
				url: 'data/qingdan.json',
				datatype: "json",
				loadonce: true,
				viewrecords: true,
				multiselect: true,
				altRows : true,
				rownumbers: true,
				width: qingdan_gridWidth,
				height: qingdan_gridHeight,
				page : 1,
				rowNum: 8,
				colModel: [
						{label : '物资名称', name : 'name', align: 'center', width: 10,editable: true},
						{label : '数量', name : 'number', align: 'center', width:10},
						{label : '规格型号 ', name : 'type', align: 'center', width:10},
						{label : '计量单位', name : 'many', align: 'center', width:10},
						{label : '单价', name : 'oneprice', align: 'center', width:10},
						{label : '总价', name : 'allprice', align: 'center',width:20},
						{label : '供货方', name : 'gonghuo', align: 'center',width:20},
						{label : '海关商品码', name : 'haiguan', align: 'center',width:20}
				],
				pager: "#qingdan_jqGridPager"
			});
			$('#qingdan_jqGrid').jqGrid('filterToolbar');
			if(!flag){
				$("#qingdan_jqGrid").navGrid('#qingdan_jqGridPager',{ // the buttons to appear on the toolbar of the grid
					edit:false,add:false,del:false,search:false,refresh:false
				}).navButtonAdd('#qingdan_jqGridPager',{
					//caption: '导入物资',
					caption: '',
					title : '新增',
					buttonicon : 'glyphicon-plus',
					onClickButton : qingdan_addLayer, //调用导入物资函数
					position : 'last'
					
				}).navButtonAdd('#qingdan_jqGridPager',{
					//caption: '导入物资',
					caption: '',
					title : '编辑',
					buttonicon : 'glyphicon glyphicon-edit',
					onClickButton : qingdan_updateLayer, //调用导入物资函数
					position : 'last'
					
				}).navButtonAdd('#qingdan_jqGridPager',{
					//caption: '导入物资',
					caption: '',
					title : '导入物资',
					buttonicon : 'fa fa-upload',
					onClickButton : importLayer, //调用导入物资函数
					position : 'last'
					
				}).navSeparatorAdd("#qingdan_jqGridPager",{
					sepcontent: '',
					sepclass : "ui-separator"
				});
				
				changeSearch(); //修改工具条
				
				flag = true;
			}
			
	});

	//关联采购弹出		
	$("#"+gird).jqGrid({
		url: 'data/caigou.json',
		datatype: "json",
		loadonce: true,
		viewrecords: true,
		multiselect: true,
		altRows : true,
		rownumbers: true,
		width: cai_gridWidth,
		height: cai_gridHeight,
		page : 1,
		rowNum: 8,
		colModel: [
			{label : '合同编号', name : 'id', align: 'center', width: 10,editable: true},
			{label : '合同名称', name : 'name', align: 'left', width:10},
			{label : '取消关联', name : 'active', align: 'center', width:0,hidden : true}
		],
		pager: ""
	});
	//左下角新增按钮
	function addLayer(){
		$('#shenhe_save_btn').hide();
		flag = 'add';
		$('#'+formBoxId+' .form-control:not(select)').val('');
		layerIndex = layer.open({
			type: 1,
			title : '新增',
			area: ['98%', '98%'], //宽高
			content: $('#'+formBoxId)
		});
	}
	//清单增加按钮
	function qingdan_addLayer(){
		flag = 'add';
		$('#qingdan_jqGrid_formBox'+' .form-control:not(select)').val('');
		layerIndex = layer.open({
			type: 1,
			title : '新增',
			area: ['80%', '80%'], //宽高
			content: $('#zengqingdan_jqGrid_formBox')
		});
	}
	//清单编辑按钮
	function qingdan_updateLayer(){
		flag = 'update';
		var setting = {
			gridId : 'qingdan_jqGrid',
			formBoxId : 'zengqingdan_jqGrid_formBox',
			title : '修改模块',
			area : ['80%', '80%']
		};
		layerIndex = updateGridData(setting);
	}
	
	//左下角编辑按钮
	function updateLayer(){
		$('#shenhe_save_btn').hide();
		flag = 'update';
		var setting = {
			gridId : gridId,
			formBoxId : formBoxId,
			title : '编辑',
			area : ['98%', '98%']
		};
		layerIndex = updateGridData(setting);
	}
	
	//左下角删除按钮
	function deleteLayer(gridId){
		deleteGridData(gridId);
	}
	//触发查看信息
	
	function formatrelName(cellValue, options, rowObject) {
			
			var len = cellValue.length;
			if(len>50){
					cellValue = cellValue.substring(0, 50) + "...";
			}
			return '<a href="javascript:;" onclick="lookInfo(\''+options.gid+'\',\''+options.rowId+'\')">'+cellValue+'</a>';
	};
	function formatRelated(cellValue, options, rowObject) {
		if (cellValue) {
			var len = cellValue.length;
			if(len>50){
					cellValue = cellValue.substring(0, 50) + "...";
			}
			return '<a href="javascript:;" onclick="lookcai()">'+cellValue+'</a>';
		}
	};
	//-------------------------------//
	//刷新
	// function refresh(){
	// 	layer.msg('更新成功!',{time:layerCloseTime});
	// };

	//审核
	function shenhe(){
		$('#shenhe_history').hide();
		var rowIds = getSelectedRow(gridId);
		if(rowIds && $.isArray(rowIds) && rowIds.length >= 1 ){
			var rowData = $('#'+gridId).getRowData(rowIds[0]);
			commIndex = layer.open({
				type : 1,
				title : '审核',
				shadeClose: true,
				area : ['50%','50%'],
				content : $('#'+shenhe_formBoxId)
				// ''
			});
		}else{
			layer.msg('请选择一条记录!',{time:layerCloseTime});
		}
		
	}
	//查看审核
	$(document).on('click','#shenhe_save_btn',function(){
		$('#shenhe_history').show();
		commIndex = layer.open({
			type : 1,
			title : '审核',
			skin: 'layui-layer-rim',
			shadeClose: true,
			area : ['70%','70%'],
			content : $('#'+shenhe_formBoxId)
		})
	});
	//导入合同
	function importLayer(){
		commIndex = layer.open({
			type: 1,
			title : "导入",
			area: ['80%', '70%'], //宽高
			content: $('#chukou_import_formBox')
		});
	}
	
	$('.qx').on('click',function(){
		layer.close(layerIndex);
	});
	
	$('#chukou_resetBtn').on('click',function(){
		$('#chukou_jqGrid_formBox :input').val('');
	});
	
	/*上传文件的表单*/
	 $("#chukou_fileupload").fileupload({
		maxNumberOfFiles:20,//上传文件的最大数量
		maxFileSize : 3000000, //最大3M
		minFileSize : 5000,//最小5K
		acceptFileTypes: /(\.|\/)(docx?|xlsx?|pdf|pptx?|gif|jpe?g|png)$/i,//接受的文件类型
		type : 'post',//客户端的请求方式
		dataType : 'json',//服务器响应的数据类型
		url: 'server/php/',//请求的地址
		messages: {//错误信息的提示
		   maxNumberOfFiles: '最多上传20张图片',
		   acceptFileTypes: '文件类型不允许',
		   maxFileSize: '文件不能大于50M',
		   minFileSize: '文件不能小于5K'
	   }
	});
	/*上传文件的表单*/
	 $("#chukou_import_formBox").fileupload({
		maxNumberOfFiles:20,//上传文件的最大数量
		maxFileSize : 3000000, //最大3M
		minFileSize : 5000,//最小5K
		acceptFileTypes: /(\.|\/)(docx?|xlsx?|pdf|pptx?|gif|jpe?g|png|zip)$/i,//接受的文件类型
		type : 'post',//客户端的请求方式
		dataType : 'json',//服务器响应的数据类型
		url: 'server/php/',//请求的地址
		messages: {//错误信息的提示
		   maxNumberOfFiles: '最多上传20张图片',
		   acceptFileTypes: '文件类型不允许',
		   maxFileSize: '文件不能大于50M',
		   minFileSize: '文件不能小于5K'
	   }
	});
	 $("#yiguan_jqGrid").jqGrid({
		url: 'data/yicaigou.json',
			// we set the changes to be made at client side using predefined word clientArray
		editurl: 'clientArray',
		datatype: "json",
		sortname: 'name',
		multiselect: true,
		sortorder: 'asc',
		loadonce: true,
		rownumbers: true,
		width: cai_gridWidth,
		height: 150,
		rowNum: 13,
		colModel: [
		{label : '合同编号', name : 'id', align: 'center', width: 25,editable: true},
				{label : '合同名称', name : 'name', align: 'center', width:20},
				{label : '取消关联', name : 'active', align: 'center', width:5, formatter:formatActive}
				],
			
		pager: "#yiguan_jqGridPager"
	});
	 // 关联的采购合同清单
function showcai (){
	var rowIds = getSelectedRow("cai_jqGrid");
	console.log(rowIds)
	if(rowIds && rowIds.length>0){
		for(var i=0; i<rowIds.length; i++){
				var json = $('#cai_jqGrid').getRowData(rowIds[i]);
			$("#yiguan_jqGrid").addRowData(uuid.v4(),json,'first');
				//$("#liucheng_changeGood_jqGrid").addJSONData(json);
		}
	}

}
});

function lookcai(rowId){
	var data = $('#cai_jqGrid').getRowData(rowId);
	data.related = $(data.related).text();
	setFormData('cai_jqGrid',data);
	title = '信息';
	changeIndex = layer.open({
		type: 1,
		title : title,
		area: ['98%', '98%'], //宽高
		content: $('#guanlian_gridBox')
	});
}

function lookInfo(gid,rowId){
	$('#shenhe_save_btn').show();
	var data = $('#'+gid).getRowData(rowId);
	data.name = $(data.name).text();
	data.relName = $(data.relName).text();
	setFormData(gid+'_formBox',data);
	title = '信息';
	commIndex = layer.open({
		type: 1,
		title : title,
		area: ['98%', '98%'], //宽高
		content: $('#'+gid+'_formBox')
	});
}
//格式化状态
function formatActive(cellValue, options, rowObject) {
	var title = '';
	var className = '';
	if(cellValue==0){
		title = '删除';
		className = 'glyphicon-trash text-danger';
	}
	return '<i title="'+title+'" class="glyphicon '+className+'"></i>';
};
</script>