<!--物流管理  -->
<style type="text/css">
#shenhewuliu_save_btn{display: none;}
#wuliu_gl_box{display: none;}
#shenhewuliu_history{display: none;}
</style>
<div class="container-fluid">
	<div class="col-sm-12 plr0 height100 gridBox" id="wuliu_gridBox">
		<table id="wuliu_jqGrid"></table>
		<div id="wuliu_jqGridPager"></div>
	</div>
</div>

<!-- 新增弹窗 -->
<div id="wuliu_jqGrid_formBox" class="layerFormBox">
	<form class="form-horizontal zzxx">
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right">
					<span>*</span>预录入编号:
				</label>
				<div class="col-sm-6">
					<input type="text" class="form-control input-sm" id="wuliu_numBer" name="numBer" placeholder="预录入编号">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>海关编号:</label>
				<div class="col-sm-6">
					<input type="riqi" class="form-control input-sm" placeholder="海关编号 ">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>签订日期:</label>
				<div class="col-sm-6">
					<input type="riqi" id="wuliu_createTime"  name="createTime" class="form-control input-sm" placeholder="签订日期 " onClick="WdatePicker()">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>生效日期:</label>
				<div class="col-sm-6">
					<input type="riqi" class="form-control input-sm" placeholder="生效日期 " onClick="WdatePicker()">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>币制:</label>
				<div class="col-xs-6">
					<select class="form-control input-sm">
						<option value="人民币" selected="true">人民币</option>
						<option value="美元" >美元</option>
					</select>
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>金额:</label>
				<div class="col-sm-6">
					<input type="riqi" class="form-control input-sm" placeholder="金额 ">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>结汇方式:</label>
				<div class="col-xs-6">
					<select class="form-control input-sm">
						<option value="货到付款" selected="true">货到付款</option>
						<option value="款到发货" >款到发货</option>
						<option value="月付" >月付</option>
					</select>
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>运输方式:</label>
				<div class="col-xs-6">
					<select class="form-control input-sm">
						<option value="水路" selected="true">水路</option>
						<option value="陆地" >陆地</option>
						<option value="空路" >空路</option>
					</select>
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right">发运地:</label>
				<div class="col-sm-6">
					<input type="riqi" class="form-control input-sm" placeholder="发运地 ">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right">目的地:</label>
				<div class="col-sm-6">
					<input type="riqi" class="form-control input-sm" placeholder="目的地 ">
				</div>
			</div>
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right">付款日期:</label>
				<div class="col-sm-6">
					<input type="riqi" class="form-control input-sm" placeholder="付款日期 ">.
				</div>
			</div>
			<!-- <div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right">截止日期:</label>
				<div class="col-sm-6">
					<input type="riqi" id="wuliu_endTime"  name="endTime" class="form-control input-sm" placeholder="截止日期 ">
				</div>
			</div> -->
			
			
			<!-- <div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>运输方式:</label>
				<div class="col-xs-6">
					<select class="form-control input-sm" id="wuliu_bus"  name="bus">
						<option value="水路" selected="true">水路</option>
						<option value="空路" >空路</option>
						<option value="陆路" >陆路</option>
					</select>
				</div>
			</div> -->
			
			<!-- <div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right"><span>*</span>结款状态:</label>
				<div class="col-xs-6">
					<select class="form-control input-sm" id="wuliu_status"  name="status">
						<option value="未支付" selected="true">未支付</option>
						<option value="已结清" >已结清</option>
					</select>
				</div>
			</div> -->
			
			<div class="form-group col-sm-4">
				<label class="col-sm-6 control-label text-right">保费:</label>
				<div class="col-sm-6">
					<input type="text" class="form-control input-sm" placeholder="保费">
				</div>
			</div>
			<div class="form-group col-sm-6">
				<label class="col-sm-6 control-label text-right">委托方:</label>
				<div class="col-sm-6">
					<input type="text" class="form-control input-sm" id="wuliu_relName"  name="relName" placeholder="委托方">
				</div>
			</div>
			<div class="form-group col-sm-6">
					<label class="col-sm-6 control-label text-right">代理方:</label>
				<div class="col-sm-6">
					<input type="riqi"  id="wuliu_company"  name="company" class="form-control input-sm" placeholder="代理方 ">
				</div>
			</div>
			<div class="form-group col-sm-6">
				<label class="col-sm-6 control-label text-right">委托方签订人:</label>
				<div class="col-sm-6">
					<input type="text" id="wuliu_roleName"  name="roleName" class="form-control input-sm" placeholder="委托方签订人">
				</div>
			</div>
			<div class="form-group col-sm-6">
				<label class="col-sm-6 control-label text-right">代理方签订人:</label>
				<div class="col-sm-6">
					<input type="text" id="wuliu_anthorName"  name="anthorName" class="form-control input-sm" placeholder="代理方签订人">
				</div>
			</div>
			<div class="form-group col-sm-6">
				<label class="col-sm-6 control-label text-right">委托方联系方式:</label>
				<div class="col-sm-6">
					<input type="text" class="form-control input-sm" placeholder="委托方联系方式">
				</div>
			</div>
			<div class="form-group col-sm-6">
				<label class="col-sm-6 control-label text-right">代理方联系方式:</label>
				<div class="col-sm-6">
					<input type="text" class="form-control input-sm" placeholder="代理方联系方式">
				 </div>
			 </div>
			 <div class="form-group col-sm-6">
				 <label class="col-sm-6 control-label text-right">委托方开户行:</label>
				 <div class="col-sm-6">
					 <input type="text" class="form-control input-sm" placeholder="委托方开户行">
				 </div>
			 </div>
			 <div class="form-group col-sm-6">
				 <label class="col-sm-6 control-label text-right">代理方开户行:</label>
				 <div class="col-sm-6"> 
				 	<input type="text" class="form-control input-sm" d="inputEmail3" placeholder="代理方开户行">
				 </div>
			 </div>
			 <div class="form-group col-sm-6">
				 <label class="col-sm-6 control-label text-right">委托方账户:</label>
				 <div class="col-sm-6">
					 <input type="text" class="form-control input-sm" placeholder="委托方账户">
				 </div>
			 </div>
			 <div class="form-group col-sm-6">
				 <label class="col-sm-6 control-label text-right">代理方账户:</label>
				 <div class="col-sm-6">
					 <input type="text" class="form-control input-sm" placeholder="代理方账户">
				 </div>
			 </div>
		<!-- 	<div class="form-group col-sm-6">
				<label class="col-sm-6 control-label text-right">传真:</label>
				<div class="col-sm-6">
					<input type="text" class="form-control input-sm" placeholder="传真">
				</div>
			</div>
				<div class="form-group col-sm-6">
					<label class="col-sm-6 control-label text-right">传真:</label>
					<div class="col-sm-6">
						<input type="text" class="form-control input-sm" placeholder="传真">
					</div>
				</div> -->

				<div class="form-group col-sm-6">
					<label class="col-sm-6 control-label text-right" style="height: 40px;text-align: right">委托方地址:</label>
					<div class="col-sm-6">
						<textarea class="form-control input-sm" placeholder="委托方地址"></textarea>
					</div>
				</div>
				<div class="form-group col-sm-6">
					<label class="col-sm-6 control-label text-right">代理方地址:</label>
					<div class="col-sm-6">
						<textarea class="form-control input-sm" placeholder="代理方地址"></textarea>
					</div>
				</div>
				<form class="form-horizontal zzxx" id="wuliu_fileupload" method="POST" enctype="multipart/form-data">
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right"><span>*</span>上传协议:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right"><span>*</span>上传提单:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right"><span>*</span>上传形式发票:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right">上传运输单据:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right">上传发票:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right">上传装箱单:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label class="col-sm-2 control-label text-right">其他:</label>
						<div class="col-sm-8">
							<span class="btn btn-default btn-sm fileinput-button">
			                    <i class="glyphicon glyphicon-plus"></i>
			                    <span>添加附件</span>
			                    <input type="file" name="files[]" multiple>
			                </span>
						</div>
					</div>
					<!-- 用于显示上传文件的浏览 样式files是必须的-->
					<ul style="text-align:center;margin:10px auto;padding:0;" class="thumbnails list-unstyled clearfix files"></ul>
					<!-- <div class="form-group col-sm-12">
						<label  class="col-sm-2 control-label text-right"><span>*</span>形式发票:</label>
						<div class="col-sm-8">
							<input  value="添加附件" type="file" placeholder="添加附件" />
						</div>
					</div>
					<div class="form-group col-sm-12">
						<label  class="col-sm-2 control-label text-right"><span>*</span>招标文件:</label>
						<div class="col-sm-8">
							<input  value="添加附件" type="file" placeholder="添加附件" />
						</div>
					</div> -->
				</form>
		<p class="text-center saveOrCacelBtn">
			<button type="button" class="saveBtn btn-info btn-sm" id="shenhewuliu_save_btn">审核</button>
			<button type="button" class="saveBtn btn btn-info btn-sm" id="wuliu_save_btn">
				保存
			</button>
			<button type="reset" class="saveBtn btn btn-info btn-sm">
				重置
			</button>
			<button type="button" class="saveBtn btn btn-info btn-sm qx" id="wuliu_cacle_btn">
				取消
			</button>
		</p>
		</div>
	</form>
<!-- 审核 -->
<div class="layerFormBox" id="shenhe_wuliu_formBoxId"> 
	<div class="row"><div class="col-sm-12" style="padding-top:15px;"><div class="radio-inline"><label><input type="radio" name="a" checked="true"/>审核不通过</label></div><div class="radio-inline"><label><input type="radio" name="a"/>审核通过</label></div><textarea class="form-control" rows="3" placeholder="审核意见..."></textarea><p class="text-center" style="margin-top:15px;"><button class="btn btn-info btn-sm qx">保存</button></p></div></div>
	<div class="col-sm-12" id="shenhewuliu_history"> 
			<table id="tj" class="table table-striped table-condensed table-bordered">
				<thead>
					<tr class="d9">
						<th>审核人</th>
						<th>审核日期</th>
						<th>审核状态</th>
						<th>说明</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>admin</td>
						<td>2015-01-10</td>
						<td>已通过</td>
						<td></td>
					</tr>
					<tr>
						<td>admin</td>
						<td>2015-01-06</td>
						<td>未通过</td>
						<td></td>
					</tr>
					<tr>
						<td>admin</td>
						<td>2015-01-04</td>
						<td>未通过</td>
						<td></td>
					</tr>
					<tr>
						<td>admin</td>
						<td>2015-01-02</td>
						<td>未通过</td>
						<td></td>
					</tr>
					<tr>
						<td>合计</td>
						<td colspan="5" class="textRight">总记录 : 4</td>
					</tr>
				</tbody>
			</table>
		</div>
</div>
<!-- 关联 -->
<div id="wuliu_gl_box" style="padding:0; width:100%;height:80%;">
	<div class="col-sm-5">
		<p style="margin-top: 20px;">请选择要关联的采购合同</p>
		<table id="wuliu_gl_jqGrid"></table>
	</div>
	<div class="col-sm-2" style="margin-top:120px;">	
		<button type="button" class="saveBtn btn btn-info btn-sm" id="wuliu_gl_btn" style="display:block">关联</button>
	</div>
	<div class="col-sm-5">
		<p style="margin-top: 20px;">已关联的采购合同</p>
		<table id="caigouguan_jqGrid"></table>
	</div>
</div>
<script type="text/javascript">

	
$(function(){
	
	/* var colModel= 	 [
			{label : '协议编号', name : 'numBer', align: 'center', width: 100},
			{label : '委托方', name : 'relName', align: 'center', width:80},
			{label : '代理方 ', name : 'company', align: 'left', width:80},
			{label : '运输方式', name : 'bus', align: 'center', width:80},
			{label : '签订时间', name : 'createTime', align: 'center', width:70},
			{label : '截止时间', name : 'endTime', align: 'center',width:80},
			{label : '委托方签订人', name : 'roleName', align: 'center',width:80},
			{label : '代理方签订人', name : 'anthorName', align: 'center',width:80},
			{label : '结款状态', name : 'status', align: 'center',width:70}
	]; */
	
	//-------------------------------//
	var layerIndex = null; //弹窗id,关闭所用
	var flag = ''; //添加修改标记
	var dataUrl = 'data/wuliu.json';//数据源链接
	var gridId = 'wuliu_jqGrid'; //表格id
	var gridPager = 'wuliu_jqGridPager'; //表格分页id
	var formBoxId = 'wuliu_jqGrid_formBox'; //添加修改窗口元素id
	var layerCloseClassName = 'qx';
	var dataSaveBtn = 'wuliu_save_btn'; //弹窗保存id
	var gridBoxId = 'wuliu_gridBox';//表格尺寸
	var layerCloseTime = 1200; //1200毫秒提示消息关闭延迟时间
	var gridWidth = $('#'+gridBoxId).width()-2;
	var gridHeight = $('#'+gridBoxId).height()-118;
	var shenhemodel = 'wuliu';

	var colModel = [
		{label : '合同编号', name : 'number', align: 'center', width: 130, formatter: formatName, searchoptions: {sopt : ['cn']}},
		{label : '合同名称', name : 'relName', align: 'center', width:80, searchoptions: {sopt : ['cn']}},
		{label : '签订日期', name : 'createTime', align: 'center', width:70, searchoptions: {sopt : ['cn']}},
		{label : '代理方 ', name : 'company', align: 'center', width:60, searchoptions: {sopt : ['cn']}},
		{label : '审核状态', name : 'status', align: 'center',width:60,formatter:formatStatus, searchoptions: {sopt : ['cn']}},
		{label : '关联状态', name : 'related', align: 'center',width:60,formatter: formatGlStatus, searchoptions: {sopt : ['cn']}}
	];
	
	$('#'+gridId).jqGrid({
		width: gridWidth,
		height: gridHeight,
		url: dataUrl,
		datatype: "json",
		loadonce: true, //加载到本地操作
		rownumbers: true, //显示顺序编号
		multiselect: true, //定义多选
		viewrecords: true, //显示总记录数
		sortname: 'name', //排序字段
		sortorder: 'asc', //排序顺序，升序或者降序（asc or desc）
		altRows : true, //设置表格隔行变色
		rowNum: 12, //每页显示的记录数
		rowList:[10,12,15,18,20,25], //
		rownumWidth: 30, 
		recordtext: "当前显示: <b>{0}</b>至<b>{1}</b> 总数: <b>{2}</b>",
		//emptyrecords: "No records to view",
		//loadtext: "Loading...",
		pager: '#'+gridPager,
		colModel: colModel
		//jsonReader : jsonReader
		
	}).navGrid('#'+gridPager,{ // the buttons to appear on the toolbar of the grid
		edit:false,add:false,del:false,search:false,refresh:false
	}).navButtonAdd('#'+gridPager,{
		//caption: '新增',
		caption: '',
		title : '新增',
		buttonicon : 'glyphicon-plus',
		onClickButton : function(){addLayer();}, //调用添加的函数
		position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
		//caption: '修改',
		caption: '',
		title : '修改',
		buttonicon : 'glyphicon-edit',
		onClickButton : function(){updateLayer();}, //调用更新的函数
		position : 'last'
		
	}).navButtonAdd('#'+gridPager,{
			//caption: '审核',
			caption: '',
			title : '审核',
			buttonicon : 'fa fa-gavel',
			onClickButton : function(){shenhe();}, //调用审核的函数
			position : 'last'
			
	}).navButtonAdd('#'+gridPager,{
			//caption: '导入合同',
			caption: '',
			title : '导入',
			buttonicon : 'fa fa-upload',
			onClickButton : function(){importLayer();}, //调用导入合同函数
			position : 'last'
			
	}).navButtonAdd('#'+gridPager,{
		//caption: '删除',
		caption: '',
		title : '删除',
		buttonicon : 'glyphicon-trash',
		//onClickButton : deleteLayer(gridId), //调用删除的函数
		onClickButton : function(){ deleteLayer(gridId); },
		position : 'last'
		
	}).navSeparatorAdd('#'+gridPager,{
		sepcontent: '',
		sepclass : "ui-separator"
	});
	
	//表格添加搜索框按钮
	$('#'+gridId).jqGrid('filterToolbar');
	//修改工具条
	changeSearch(); 
	
	//editGridRow新增记录；viewGridRow查看记录详情；delGridRow删除记录。
	
	//弹框保存按钮
	$(document).on('click','#'+dataSaveBtn,function(){
		if(flag == 'add'){
			var data = getFormData(formBoxId);
			var currentNumber = uuid.v4();
			var result = jQuery('#'+gridId).addRowData(currentNumber,data,'first');
			if(result){
				layer.msg('添加成功',{time:layerCloseTime});
				layer.close(layerIndex);
				
				jQuery('#'+gridId).setSelection(currentNumber,true);
				
			}else{
				layer.msg('添加失败!',{time:layerCloseTime});
			}
		}else if(flag == 'update'){
			
			//删除
			var rowIds = getSelectedRow(gridId);
			jQuery('#'+gridId).delRowData(rowIds[0]);
			//添加
			var data = getFormData(formBoxId);
			console.log(data);
			var currentNumber = uuid.v4();
			var result = jQuery('#'+gridId).addRowData(currentNumber,data,'first');
			
			if(result){
				layer.msg('更新成功',{time:layerCloseTime});
				layer.close(layerIndex);
				jQuery('#'+gridId).setSelection(currentNumber,true);
			}else{
				layer.msg('更新失败!',{time:layerCloseTime});
			}
		}
		
	});
	
	//弹框取消按钮
	$('.'+layerCloseClassName).on('click',function(){
		layer.close(layerIndex);
	});
	
	//左下角新增按钮
	function addLayer(){
		$('#shenhewuliu_save_btn').hide();
		flag = 'add';
		$('#'+formBoxId+' .form-control:not(select)').val('');
		layerIndex = layer.open({
			type: 1,
			title : '添加模块',
			area: ['70%', '80%'], //宽高
			content: $('#'+formBoxId)
		});
	}
	
	//左下角编辑按钮
	function updateLayer(){
		$('#shenhewuliu_save_btn').hide();
		flag = 'update';
		var setting = {
			gridId : gridId,
			formBoxId : formBoxId,
			title : '修改模块',
			area : ['70%', '80%']
		};
		layerIndex = updateGridData(setting);
	}
	
	//左下角删除按钮
	function deleteLayer(gridId){
		deleteGridData(gridId);
	}
	//审核
	function shenhe(){
		$('#shenhewuliu_history').hide();
		var rowIds = getSelectedRow(gridId);
		if(rowIds && $.isArray(rowIds) && rowIds.length >= 1 ){
			var rowData = $('#'+gridId).getRowData(rowIds[0]);
			commIndex = layer.open({
				type : 1,
				title : '审核窗口',
				skin: 'layui-layer-rim',
				shadeClose: true,
				area : ['70%','70%'],
				content : $('#'+'shenhe_'+shenhemodel+'_formBoxId')
					// ''
			});
		}else{
			layer.msg('请选择一条记录!',{time:layerCloseTime});
		}
	}

	//导入合同
	$('.fileinput-button')
	function importLayer(){
		commIndex = layer.open({
			type: 1,
			title : "批量导入",
			area: ['60%', '60%'], //宽高
			content: $('#wuliu_import_formBox')
		});
	}
	//查看审核
	$(document).on('click','#shenhewuliu_save_btn',function(){
		$('#shenhewuliu_history').show();
			commIndex = layer.open({
				type : 1,
				title : '审核窗口',
				skin: 'layui-layer-rim',
				shadeClose: true,
				area : ['70%','70%'],
				content : $('#'+'shenhe_'+shenhemodel+'_formBoxId')
		})
	});	
	//格式化标题
	function formatName(cellValue, options, rowObject) {
		var len = cellValue.length;
		if(len>50){
			cellValue = cellValue.substring(0, 50) + "...";
		}
		return '<a href="javascript:;" onclick="lookInfo(\''+options.gid+'\',\''+options.rowId+'\')">'+cellValue+'</a>';
	};
	//关联按钮
	$(document).on('click','#wuliu_gl_btn',function(){
		var rowIds = getSelectedRow('wuliu_gl_jqGrid');
		if(rowIds && $.isArray(rowIds) && rowIds.length >= 1 ){
			showcaigou();
		}else{
			layer.msg('请选择一条记录!',{time:layerCloseTime});
		}
	});
	//关联
	function formatGlStatus(cellValue, options, rowObject){
		return cellValue ? '<a href="javascript:;" class="wuliu_gl_box">'+cellValue+'</a>' : '<a href="javascript:;" class="wuliu_gl_box">未关联</a>'; 
	}
	//关联弹出窗口
	$(document).on('click','.wuliu_gl_box',function(){
		commIndex = layer.open({
			type : 1,
			title : '关联采购合同',
			area : ["80%","80%"],
			content: $('#wuliu_gl_box')
		});
	});
	$("#wuliu_gl_jqGrid").jqGrid({
		url: 'data/caigou.json',
		datatype: "json",
		loadonce: true,
		viewrecords: true,
		multiselect: true,
		altRows : true,
		width: $('#wuliu_gl_gridBox').width(),
		height: 150,
		page : 1,
		rowNum: 8,
		colModel: [
			{label : '合同编号', name : 'id', align: 'center', width: 50, searchoptions: { sopt : ['cn']}
			},
			{label : '合同名称', name : 'name', align: 'center', width:100}
				]
			});
		$('#wuliu_gl_jqGrid').jqGrid('filterToolbar');
		$("#caigouguan_jqGrid").jqGrid({
			url: 'data/yicaigou.json',
			editurl: 'clientArray',
			datatype: "json",
			sortname: 'name',
			sortorder: 'asc',
			loadonce: true,
			width: $('#caigouguan_gridBox').width(),
			height: 150,
			rowNum: 13,
			colModel: [
				{label : '合同编号', name : 'id', align: 'center', width: 50, searchoptions: { sopt : ['cn']}
				},
				{label : '合同名称', name : 'name', align: 'center', width:100},
				{label : '取消关联', name : 'list', align: 'center', width:10, formatter:formatStatus}
			]
		});
	// 关联的采购合同清单
function showcaigou (){
	var rowIds = getSelectedRow("wuliu_gl_jqGrid");
	console.log(rowIds)
	if(rowIds && rowIds.length>0){
		for(var i=0; i<rowIds.length; i++){
				var json = $('#wuliu_gl_jqGrid').getRowData(rowIds[i]);
			$("#caigouguan_jqGrid").addRowData(uuid.v4(),json,'first');
				$("#caigouguan_jqGrid").addJSONData('status');
		}
	}

}
	/*上传文件的表单*/
		 $("#wuliu_fileupload").fileupload({
			maxNumberOfFiles:20,//上传文件的最大数量
			maxFileSize : 3000000, //最大3M
			minFileSize : 5000,//最小5K
			acceptFileTypes: /(\.|\/)(docx?|xlsx?|pdf|pptx?|gif|jpe?g|png)$/i,//接受的文件类型
			type : 'post',//客户端的请求方式
			dataType : 'json',//服务器响应的数据类型
	        url: 'server/php/',//请求的地址
	       	messages: {//错误信息的提示
               maxNumberOfFiles: '最多上传20张图片',
               acceptFileTypes: '文件类型不允许',
               maxFileSize: '文件不能大于3M',
               minFileSize: '文件不能小于5K'
	       }
		});
		/*上传文件的表单*/
		 $("#wuliu_import_formBox").fileupload({
			maxNumberOfFiles:20,//上传文件的最大数量
			maxFileSize : 3000000, //最大3M
			minFileSize : 5000,//最小5K
			acceptFileTypes: /(\.|\/)(docx?|xlsx?|pdf|pptx?|gif|jpe?g|png)$/i,//接受的文件类型
			type : 'post',//客户端的请求方式
			dataType : 'json',//服务器响应的数据类型
	        url: 'server/php/',//请求的地址
	       	messages: {//错误信息的提示
               maxNumberOfFiles: '最多上传20张图片',
               acceptFileTypes: '文件类型不允许',
               maxFileSize: '文件不能大于3M',
               minFileSize: '文件不能小于5K'
	       }
		});
	
	//-------------------------------//
	
});
function lookInfo(gid,rowId){
	$('#shenhewuliu_save_btn').show();
	var data = $('#'+gid).getRowData(rowId);
	data.name = $(data.name).text();
	data.relName = $(data.relName).text();
	setFormData(gid+'_formBox',data);
	title = '查看信息';
	commIndex = layer.open({
		type: 1,
		title : title,
		area: ['98%', '98%'], //宽高
		content: $('#'+gid+'_formBox')
	});
}

	
</script>